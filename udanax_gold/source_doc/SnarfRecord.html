<html>
<html>
<head>
<title>Class SnarfRecord</title>
</head><body>
<a href="index.html">Index</a> - <a href="AllPackages.html">All Packages</a> - <a href="AllCategories.html">All Categories</a> - <a href="AllClasses.html">All Classes</a><br><h1>Class SnarfRecord</h1>
<font color="green">Manage retrieval, refitting, and rewriting of existing flocks.  Assign indices for new flocks.  <br><br><a href="SnarfRecord.html">SnarfRecords</a> can go away after their contents have been flushed.  We might keep it around if we expect to be assigning new flocks to the snarf again, just to keep myOccupied.  The snarfRecord will be recreated when another object is read in.<br></font></p>Package: <a href="Package_Udanax-Gold.html">Udanax-Gold</a><br>All Superclasses: <a href="Object.html">Object</a> <a href="Heaper.html">Heaper</a> <br>Protocols: <a href="Protocol_Object.html">Object</a><br>Categories: <a href="Category_Xanadu-Snarf.html">Xanadu-Snarf</a><br><hr><h2>Class Methods</h3><a name="#make:with:with:"><h4><font color="blue">make:</font> snarfID <font color="blue">with:</font> packer <font color="blue">with:</font> spaceLeft </h4></a><blockquote><font color="green"><br></font></blockquote><hr><h2>Instance Methods</h3><a name="#actualHashForEqual"><h4><font color="blue">actualHashForEqual</font> </h4></a><blockquote><font color="green"><br></font></blockquote><a name="#allocate:with:"><h4><font color="blue">allocate:</font> size <font color="blue">with:</font> shep </h4></a><blockquote><font color="green">Shep is being newly added to this snarf.  Allocate enough space for it and return the newly assigned index for it.<br></font></blockquote><a name="#allocateIndex"><h4><font color="blue">allocateIndex</font> </h4></a><blockquote><font color="green">Return the first unoccupied index in the snarf.  Compute the lowest<br>	 element >= 0 that is not already in the occupied region by subtracting <br>	 the occupied region from the region >= 0.<br></font></blockquote><a name="#changedFlock:with:"><h4><font color="blue">changedFlock:</font> index <font color="blue">with:</font> shep </h4></a><blockquote><font color="green">Remember that the flock at index must be written to the snarf on the next update.<br></font></blockquote><a name="#create:with:with:"><h4><font color="blue">create:</font> snarfID <font color="blue">with:</font> packer <font color="blue">with:</font> spaceLeft </h4></a><blockquote><font color="green"><br></font></blockquote><a name="#destruct"><h4><font color="blue">destruct</font> </h4></a><blockquote><font color="green">Destroy all objects imaged from this snarf.<br></font><br>Overrides: <a href="Heaper.html#destruct">Heaper</a></blockquote><a name="#dismantleFlock:"><h4><font color="blue">dismantleFlock:</font> info </h4></a><blockquote><font color="green">Remove the flock from the disk.  Replace it with a <a href="Pumpkin.html">Pumpkin</a> so that the <br>	 routine that flushes to disk knows to remove whatever's there already.<br></font></blockquote><a name="#fetchForward:"><h4><font color="blue">fetchForward:</font> index </h4></a><blockquote><font color="green">If the location specified by info has been forwarded, return a flockInfo<br>	 describing its new location.<br></font></blockquote><a name="#flushChanges"><h4><font color="blue">flushChanges</font> </h4></a><blockquote><font color="green">Rewrite all flocks that have changed in this snarf.<br></font></blockquote><a name="#forgottenFlocks"><h4><font color="blue">forgottenFlocks</font> </h4></a><blockquote><font color="green">Return the set of indices to locations that are forgotten.<br></font></blockquote><a name="#getWriteHandler"><h4><font color="blue">getWriteHandler</font> </h4></a><blockquote><font color="green">Get the handler for my snarf so that I can send or receive data from it.<br></font></blockquote><a name="#isEqual:"><h4><font color="blue">isEqual:</font> other </h4></a><blockquote><font color="green"><br></font></blockquote><a name="#isForgotten:"><h4><font color="blue">isForgotten:</font> index </h4></a><blockquote><font color="green">Return true if the flock at that location is forgotten. Higher level routines <br>	should make sure this doesn't get done very often because it requires bringing <br>	in the snarf if it's not already there.<br></font></blockquote><a name="#isPurgeable"><h4><font color="blue">isPurgeable</font> </h4></a><blockquote><font color="green">Return true if everything in this snarfRecord is purged. <br>	 If so, then this snarfRecord can be thrown away.<br></font></blockquote><a name="#makeReal:with:"><h4><font color="blue">makeReal:</font> index <font color="blue">with:</font> stub </h4></a><blockquote><font color="green">We know that the object wasn't imaged.  Read the real shepherd into<br>	 the memory occupied by stub.  If the location is a forwarder, then <br>	 register a new flockInfo with the stub and just return.<br></font></blockquote><a name="#originateFlock:"><h4><font color="blue">originateFlock:</font> index </h4></a><blockquote><font color="green">This will get a flock that we know the location of<br>	 without a stub.  The flock must not already be imaged,<br>	 and it must not be forwarded.<br></font></blockquote><a name="#printOn:"><h4><font color="blue">printOn:</font> oo </h4></a><blockquote><font color="green"><br></font><br>Overrides: <a href="Object.html#printOn:">Object</a></blockquote><a name="#readOccupied"><h4><font color="blue">readOccupied</font> </h4></a><blockquote><font color="green">Create an array with the sizes of every flock in the snarf.<br></font></blockquote><a name="#refitFlocks"><h4><font color="blue">refitFlocks</font> </h4></a><blockquote><font color="green">Recompute size information for all changed shepherds and see if they still fit.<br>	 Any that don't get handed to the <a href="SnarfPacker.html">SnarfPacker</a> to treat as new flocks.   The <br>	 old space changed and dismantled flocks has been returned to the pool.  <br>	 Reallocate space for the changed flocks out of the pool.  Any that don't fit <br>	 are handed back to myPacker to go in other snarfs.<br></font></blockquote><a name="#setSpaceLeft:"><h4><font color="blue">setSpaceLeft:</font> spaceLeft </h4></a><blockquote><font color="green"><br></font></blockquote><a name="#spaceLeft"><h4><font color="blue">spaceLeft</font> </h4></a><blockquote><font color="green">Return the amount of space currently left in the snarf.<br></font></blockquote><a name="#wipeBelowHighest:with:"><h4><font color="blue">wipeBelowHighest:</font> highest <font color="blue">with:</font> handler </h4></a><blockquote><font color="green"><br></font></blockquote><br><br><a href="index.html">Index</a> - <a href="AllPackages.html">All Packages</a> - <a href="AllCategories.html">All Categories</a> - <a href="AllClasses.html">All Classes</a><br></body>
</html>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-5004449-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
</body>
</html>
