<html>
<html>
<head>
<title>Class FeWork</title>
</head><body>
<a href="index.html">Index</a> - <a href="AllPackages.html">All Packages</a> - <a href="AllCategories.html">All Categories</a> - <a href="AllClasses.html">All Classes</a><br><h1>Class FeWork</h1>
<font color="green">A persistent identity for a changeable object.<br></font></p>Package: <a href="Package_Udanax-Gold.html">Udanax-Gold</a><br>All Superclasses: <a href="Object.html">Object</a> <a href="Heaper.html">Heaper</a> <a href="FeRangeElement.html">FeRangeElement</a> <br>Immediate Subclasses: <a href="FeClub.html">FeClub</a> <br>Protocols: <a href="Protocol_Object.html">Object</a><br>Categories: <a href="Category_Xanadu-nkernel.html">Xanadu-nkernel</a><br><hr><h2>Class Methods</h3><a name="#bombReleaseWork:"><h4><font color="blue">bombReleaseWork:</font> CHARGE </h4></a><blockquote><font color="green"><br></font></blockquote><a name="#infostProtocol"><h4><font color="blue">infostProtocol</font> </h4></a><blockquote><font color="green"><br></font><br>Overrides: <a href="FeRangeElement.html#infostProtocol">FeRangeElement class</a><br>Overridden by: <a href="FeClub.html#infostProtocol">FeClub class</a> </blockquote><a name="#make:"><h4><font color="blue">make:</font> contents </h4></a><blockquote><font color="green">Essential.  Create a new Work whose initial contents are the given Edition. The reader, editor, owner, sponsor, and KeyMaster come from the fluid environment. If the KeyMaster has edit permission, then the Work is initially grabbed by it.<br>	Note: This does not assign it a global <a href="ID.html">ID</a>; that must be done separately (see Server::assignID).<br></font><br>Overridden by: <a href="FeClub.html#make:">FeClub class</a> </blockquote><a name="#on:"><h4><font color="blue">on:</font> be </h4></a><blockquote><font color="green"><br></font><br>Overridden by: <a href="FeClub.html#on:">FeClub class</a> </blockquote><hr><h2>Instance Methods</h3><a name="#addRevisionDetector:"><h4><font color="blue">addRevisionDetector:</font> detector </h4></a><blockquote><font color="green">Essential. Trigger a Detector whenever there is a revision to the Work which the CurrentKeyMaster can see. If this detector has already been added, then the old KeyMaster associated with it is replaced with the CurrentKeyMaster.<br>	See RevisionDetector::revised (Edition * contents,<br>		<a href="ID.html">ID</a> * author,<br>		IntegerVar sequence,<br>		IntegerVar time).<br></font></blockquote><a name="#addSponsors:"><h4><font color="blue">addSponsors:</font> clubs </h4></a><blockquote><font color="green"><br></font></blockquote><a name="#addStatusDetector:"><h4><font color="blue">addStatusDetector:</font> detector </h4></a><blockquote><font color="green">Essential.  Add a detector which will be notified whenever the locking status of this Work object changes.<br>	See <a href="FeStatusDetector.html">FeStatusDetector</a>::grabbed (Work *, <a href="ID.html">ID</a> *) / released (Work *).<br></font></blockquote><a name="#again"><h4><font color="blue">again</font> </h4></a><blockquote><font color="green"><br></font><br>Overrides: <a href="FeRangeElement.html#again">FeRangeElement</a></blockquote><a name="#canMakeIdentical:"><h4><font color="blue">canMakeIdentical:</font> newIdentity </h4></a><blockquote><font color="green"><br></font><br>Overrides: <a href="FeRangeElement.html#canMakeIdentical:">FeRangeElement</a></blockquote><a name="#canRead"><h4><font color="blue">canRead</font> </h4></a><blockquote><font color="green">Return whether you have read permission.  If grabbed, returns TRUE (because a grabber can always read); if released, then returns whether the CurrentKeyMaster has sufficient permission to read the work.  (Read or Edit permission is required.)  Does not check any other KeyMasters you may be holding.<br>	Note: Be careful of synchronization problems, since the permissions may change between when you ask this question and when you try to actually read the Work.<br></font></blockquote><a name="#canReadHistory"><h4><font color="blue">canReadHistory</font> </h4></a><blockquote><font color="green">self canRead or CurrentKeyMaster has authority of the historyClub<br></font></blockquote><a name="#canRevise"><h4><font color="blue">canRevise</font> </h4></a><blockquote><font color="green">Return whether the <a href="BeWork.html">BeWork</a> is grabbed by you through this <a href="FeWork.html">FeWork</a>.<br>	Note: Be careful of synchronization problems, since the permissions may change before you try to actually revise it, causing you to lose your grab.<br></font></blockquote><a name="#create:"><h4><font color="blue">create:</font> be </h4></a><blockquote><font color="green"><br></font><br>Overridden by: <a href="FeClub.html#create:">FeClub</a> </blockquote><a name="#currentAuthor"><h4><font color="blue">currentAuthor</font> </h4></a><blockquote><font color="green"><br></font></blockquote><a name="#destruct"><h4><font color="blue">destruct</font> </h4></a><blockquote><font color="green"><br></font><br>Overrides: <a href="Heaper.html#destruct">Heaper</a></blockquote><a name="#editClub"><h4><font color="blue">editClub</font> </h4></a><blockquote><font color="green">Essential.  Return the club which has permission to revise this Work.  Blasts if noone can (ie. editor has been removed).<br></font></blockquote><a name="#edition"><h4><font color="blue">edition</font> </h4></a><blockquote><font color="green">Essential.  Return the current Edition.  Succeeds if the Work is already grabbed, or if the CurrentKeyMaster has either Read or Edit permission.<br>	Note: If this is an unsponsored Work, the Edition might have been discarded, in which case this operation will blast.<br></font></blockquote><a name="#endorse:"><h4><font color="blue">endorse:</font> additionalEndorsements </h4></a><blockquote><font color="green">Essential.  Adds to the endorsements on this Work. The set of endorsements must be a finite number of (club <a href="ID.html">ID</a>, token <a href="ID.html">ID</a>) pairs. This requires the signature authority of all of the Clubs used to endorse; will blast and do nothing if any of the required authority is lacking. The token <a href="ID.html">IDs</a> must not be named <a href="ID.html">IDs</a>.<br></font></blockquote><a name="#endorsements"><h4><font color="blue">endorsements</font> </h4></a><blockquote><font color="green">Essential.  Return all of the endorsements which have been placed on this Work and are not currently retracted.<br>	(Endorsements are used to filter various operations which return sets of Works.  See <a href="FeEdition.html">FeEdition</a>::rangeTranscluders() for one way to find this work by filtering for its endorsements.)<br></font></blockquote><a name="#fetchAuthor"><h4><font color="blue">fetchAuthor</font> </h4></a><blockquote><font color="green"><br></font></blockquote><a name="#fetchBe"><h4><font color="blue">fetchBe</font> </h4></a><blockquote><font color="green"><br></font><br>Overrides: <a href="FeRangeElement.html#fetchBe">FeRangeElement</a></blockquote><a name="#getAuthor"><h4><font color="blue">getAuthor</font> </h4></a><blockquote><font color="green"><br></font></blockquote><a name="#getOrMakeBe"><h4><font color="blue">getOrMakeBe</font> </h4></a><blockquote><font color="green"><br></font><br>Overrides: <a href="FeRangeElement.html#getOrMakeBe">FeRangeElement</a></blockquote><a name="#grab"><h4><font color="blue">grab</font> </h4></a><blockquote><font color="green">Essential.  Grab the Work to prevent other clients from revising it.  Requires edit permission. Snapshots the CurrentKeyMaster and CurrentAuthor (to be used to maintain the grab and report what was done with it). Fails if<br>		- someone else has it grabbed<br>		- the CurrentKeyMaster does not have edit permission<br>		- the CurrentKeyMaster does not have signature authority of the CurrentAuthor<br>	If this Work was already grabbed by you, then it updates the KeyMaster and Author it holds. (If the regrab fails, the old grab will remain in effect.)<br>	The grab will be released<br>		- upon a release request<br>		- if the KeyMaster loses authority to edit<br>		- if the KeyMaster loses the signature authority of the Author<br>		- at the end of the session<br>		- when the <a href="FeWork.html">FeWork</a> object is deallocated (if an <a href="FeWork.html">FeWork</a> was dropped while grabbed,  it will be deallocated 'eventually')<br></font></blockquote><a name="#grabber"><h4><font color="blue">grabber</font> </h4></a><blockquote><font color="green">Essential.  If you have edit authority, and someone has the <a href="BeWork.html">BeWork</a> grabbed, then return the Club <a href="ID.html">ID</a> that was the value of his CurrentAuthor when he grabbed it; otherwise blast.<br>	Requiring edit authority is appropriate here, because it is exactly editors who are affected by competing grabs, and need to know who has the grab.  Once the <a href="BeWork.html">BeWork</a> is revised, anyone who can read the current trail can see the revision, but the grab state doesn't necessarily imply that the <a href="BeWork.html">BeWork</a> will be revised soon, or ever.<br></font></blockquote><a name="#historyClub"><h4><font color="blue">historyClub</font> </h4></a><blockquote><font color="green">Essential. Return the club which will be recorded as the initial club for frozen Works in the history trail.  Blasts if there is no trail being generated.<br></font></blockquote><a name="#lastRevisionAuthor"><h4><font color="blue">lastRevisionAuthor</font> </h4></a><blockquote><font color="green">The <a href="ID.html">ID</a> of the author of the last revision of this Work to its current Edition, or its creation if it hasn't been revised since. The Work must be grabbed, or the CurrentKeyMaster must be able to exercise the authority of the Read, Edit, or History Club.<br></font></blockquote><a name="#lastRevisionNumber"><h4><font color="blue">lastRevisionNumber</font> </h4></a><blockquote><font color="green">The sequence number of the last revision of this Work to its current Edition, or its creation if it hasn't been revised since. The Work must be grabbed, or the CurrentKeyMaster must be able to exercise the authority of the Read, Edit, or History Club.<br></font></blockquote><a name="#lastRevisionTime"><h4><font color="blue">lastRevisionTime</font> </h4></a><blockquote><font color="green">The time of the last revision of this Work to its current Edition, or its creation if it hasn't been revised since. The Work must be grabbed, or the CurrentKeyMaster must be able to exercise the authority of the Read, Edit, or History Club.<br></font></blockquote><a name="#lock"><h4><font color="blue">lock</font> </h4></a><blockquote><font color="green"><br></font></blockquote><a name="#lockingClub"><h4><font color="blue">lockingClub</font> </h4></a><blockquote><font color="green"><br></font></blockquote><a name="#makeIdentical:"><h4><font color="blue">makeIdentical:</font> newIdentity </h4></a><blockquote><font color="green"><br></font><br>Overrides: <a href="FeRangeElement.html#makeIdentical:">FeRangeElement</a></blockquote><a name="#printOn:"><h4><font color="blue">printOn:</font> oo </h4></a><blockquote><font color="green"><br></font><br>Overrides: <a href="Object.html#printOn:">Object</a></blockquote><a name="#readClub"><h4><font color="blue">readClub</font> </h4></a><blockquote><font color="green">Essential.  Return the club which has permission to read this Work.  Blasts if the read Club has been removed (in that case, only those who have edit permission can read the Work).<br></font></blockquote><a name="#release"><h4><font color="blue">release</font> </h4></a><blockquote><font color="green">Essential.  Release the grab on this Work; if a requestGrab had been pending, remove it. Does nothing if it is already unlocked.<br></font><br>Overrides: <a href="Object.html#release">Object</a></blockquote><a name="#removeEditClub"><h4><font color="blue">removeEditClub</font> </h4></a><blockquote><font color="green">Essential.  Irrevocably remove edit permission. Requires ownership authority.<br></font></blockquote><a name="#removeLastRevisionDetector"><h4><font color="blue">removeLastRevisionDetector</font> </h4></a><blockquote><font color="green">Essential. Inform the work that its last revision detector has gone away.<br></font></blockquote><a name="#removeLastStatusDetector"><h4><font color="blue">removeLastStatusDetector</font> </h4></a><blockquote><font color="green">Essential.  Last detector has gone away<br></font></blockquote><a name="#removeReadClub"><h4><font color="blue">removeReadClub</font> </h4></a><blockquote><font color="green">Essential.  Irrevocably remove read permission (although you should note that editors are still able to read, if there are any). Requires ownership authority.<br></font></blockquote><a name="#removeSponsors:"><h4><font color="blue">removeSponsors:</font> clubs </h4></a><blockquote><font color="green"><br></font></blockquote><a name="#requestGrab"><h4><font color="blue">requestGrab</font> </h4></a><blockquote><font color="green">Essential.  Registers a request so that the next time this Work would have been released and no other grab requests are outstanding the CurrentKeyMaster (as of making the request) has edit permission, and has signature authority of the CurrentAuthor (as of making the request), it will be grabbed by this <a href="FeWork.html">FeWork</a>.  If this <a href="FeWork.html">FeWork</a> already has the Work grabbed, then the request has no effect.  To find out when the grab succeeds, place <a href="Status.html">Status</a> Detectors on the Work.  (If there are competing requestGrabs for a <a href="BeWork.html">BeWork</a>, the queueing of the requests may not be FIFO, but is starvation-free.)  Note that if you have a requestGrab outstanding on a <a href="BeWork.html">BeWork</a> through one <a href="FeWork.html">FeWork</a>, and release a grab you have through another, your requestGrab has no special priority over those of other users.<br></font></blockquote><a name="#requestLock"><h4><font color="blue">requestLock</font> </h4></a><blockquote><font color="green">Essential.  Registers a request so that the next time this Work would have been unlocked and the KeyMaster has edit permission, it will be locked by this client. If this client already has it locked, then it has no effect. To find out when this happens, place <a href="Status.html">Status</a> Detectors on the Work.<br></font></blockquote><a name="#retract:"><h4><font color="blue">retract:</font> removedEndorsements </h4></a><blockquote><font color="green">Essential.  Removes endorsements from this Work. This requires the signature authority of all of the Clubs whose endorsements are in the list; will blast and do nothing if any of the required authority is lacking. Ignores all endorsements which you could have removed, but which don't happen to be there right now.<br></font></blockquote><a name="#revise:"><h4><font color="blue">revise:</font> newEdition </h4></a><blockquote><font color="green">Essential.  Change the current Edition of this work to newEdition. The Work must be grabbed  The grabber is recorded as the author who made the revision.<br>	 (This is the fundamental write operation.)<br></font></blockquote><a name="#revisionDetector"><h4><font color="blue">revisionDetector</font> </h4></a><blockquote><font color="green">Essential. Return a detector tht will trigger whenever there is a revision to the Work which the CurrentKeyMaster can see.<br>	See RevisionDetector::revised (Edition * contents,<br>		<a href="ID.html">ID</a> * author,<br>		IntegerVar sequence,<br>		IntegerVar time).<br></font></blockquote><a name="#revisions"><h4><font color="blue">revisions</font> </h4></a><blockquote><font color="green">Return the revision trail of the receiver.  The trail will be empty if no revisions have been recorded. The trail is updated immediately when the Work is revised.<br>	In order to get the trail, either the Work must be grabbed, or you must be a member of the Read, Edit, or History Clubs.<br></font></blockquote><a name="#setEditClub:"><h4><font color="blue">setEditClub:</font> club </h4></a><blockquote><font color="green">Essential.  Change who has edit permission. Requires ownership authority.<br>	 Aborts if the Work doesn't have an edit Club.<br></font></blockquote><a name="#setHistoryClub:"><h4><font color="blue">setHistoryClub:</font> club </h4></a><blockquote><font color="green">Essential.  Change the initial read Club for frozen Works in the trail. Requires ownership authority. Setting it to nil turns off the recording of history.<br></font></blockquote><a name="#setKeyMaster:"><h4><font color="blue">setKeyMaster:</font> km </h4></a><blockquote><font color="green">Essential.  Change the authority through which the Work is being read and revised. Blasts if the Work is locked and the new authority is insufficient to maintain the lock.<br></font></blockquote><a name="#setReadClub:"><h4><font color="blue">setReadClub:</font> club </h4></a><blockquote><font color="green">Essential.  Change who has read permission. Requires ownership authority.<br>	 Aborts if the works doesn't have a read Club.<br></font></blockquote><a name="#sponsor:"><h4><font color="blue">sponsor:</font> clubs </h4></a><blockquote><font color="green">Essential.  Add to the list of sponsors of this Work. Requires signature authority of all of the Clubs in the set.<br></font></blockquote><a name="#sponsors"><h4><font color="blue">sponsors</font> </h4></a><blockquote><font color="green">Essential.  All of the Clubs which are sponsoring this Work to keep it from being discarded.<br>	What sort of permissions does this require?<br></font></blockquote><a name="#statusDetector"><h4><font color="blue">statusDetector</font> </h4></a><blockquote><font color="green">Essential.  Return a detector which will be notified whenever the locking status of this Work changes.<br>	See <a href="FeStatusDetector.html">FeStatusDetector</a>::grabbed (Work *, <a href="ID.html">ID</a> *) / released (Work *).<br></font></blockquote><a name="#triggerRevisionDetectors:with:with:with:"><h4><font color="blue">triggerRevisionDetectors:</font> contents <font color="blue">with:</font> author <font color="blue">with:</font> time <font color="blue">with:</font> sequence </h4></a><blockquote><font color="green"><br></font></blockquote><a name="#unendorse:"><h4><font color="blue">unendorse:</font> removedEndorsements </h4></a><blockquote><font color="green"><br></font></blockquote><a name="#unlock"><h4><font color="blue">unlock</font> </h4></a><blockquote><font color="green">Essential.  Release the lock on this Work. Does nothing if it is already unlocked.<br></font></blockquote><a name="#unsponsor:"><h4><font color="blue">unsponsor:</font> clubs </h4></a><blockquote><font color="green">Essential.  End sponsorship of this Work by all of the listed Clubs. Requires signature authority of all of the Clubs in the set, even if they are not currently sponsors.<br>	Should this use the CurrentKeyMaster? Or the internal KeyMaster if it is grabbed?<br></font></blockquote><a name="#updateStatus"><h4><font color="blue">updateStatus</font> </h4></a><blockquote><font color="green">The authority of my KeyMaster has changed and I need to update my status<br></font></blockquote><br><br><a href="index.html">Index</a> - <a href="AllPackages.html">All Packages</a> - <a href="AllCategories.html">All Categories</a> - <a href="AllClasses.html">All Classes</a><br></body>
</html>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-5004449-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
</body>
</html>
